# GPT Chatbot для Telegram

Этот проект включает в себя Telegram-бота, использующего модели OpenAI для обработки запросов пользователей.

## Основные возможности

- Поддержка нескольких версий модели GPT(3.5 and 4).
- Сохраняется контекст диалога, нет ограничений на количество токенов, ограничений внутри телеграма.
- Удобные анимации для сохранения user-friendly interface.
- Асинхронная аутентификация пользователей на основе Google Sheets.
- Сбор статистики использования для каждого пользователя.
- Специальные команды и привилегии для администраторов.

## Стек технологий

- **Python 3**: Основной язык программирования.
- **aiogram**: Асинхронная библиотека для создания ботов в Telegram.
- **openai**: Интеграция с моделями GPT для обработки запросов.
- **asyncio**: Библиотека для асинхронного программирования.
- **gspread**: Интеграция с Google Sheets.


## Логика работы с таблицами

1. **Верификация GPT ITC**: В этой таблице содержится список сотрудников, которые могут взаимодействовать с ботом. Структура таблицы:
    - ID пользователя
    - ФИО
    - Telegram Handle

2. **Админы GPT ITC**: Таблица, содержащая список администраторов с возможностью выполнения специальных команд. Структура:
    - ID администратора
    - ФИО

3. **Аналитика GPT ITC**: Таблица, отражающая статистику использования каждого пользователя. Она содержит:
    - ФИО
    - Дата
    - Количество запросов к каждой модели (например, "GPT-3.5 Turbo", "GPT-4")
    - Количество потраченных денег

Пользователи и администраторы верифицируются на основе их ID в Telegram, их данные, а также статистика использования автоматически обновляются каждые 10 минут из Google Sheets.


## Установка

1. Клонируйте репозиторий:

```
git clone [URL репозитория]
```

2. Установите необходимые зависимости:

```
pip install -r requirements.txt
```

3. Создайте файл `.env` с вашими переменными окружения, такими как токен Telegram-бота и API-ключ для OpenAI.

4. Запустите бота:

```
python main.py
```

## Конфигурация

- **Google Sheets**: Для аутентификации пользователей и управления администраторами используются Google Sheets. Убедитесь, что у вас есть доступ к этим таблицам, и установите соответствующие права доступа.

- **.env переменные**:
  - `TOKEN`: Ваш токен Telegram-бота.
  - `OPENAI_API_KEY`: Ваш API-ключ от OpenAI.

## Разработка и расширение

При необходимости вы можете расширять функционал бота, добавляя новые команды или интегрируя другие сервисы. Для этого рекомендуется ознакомиться с документацией по библиотекам `aiogram` и `openai`.
